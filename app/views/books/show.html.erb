<!-- =========================================================
  画面: 単一 Book の詳細
  ---------------------------------------------------------
  ・パンくず／タイトル／説明／目次のリンクリスト
  ・FREE 章にはバッジ表示
========================================================= -->

<!-- ===== パンくず ===== -->
<% breadcrumb :books %>
<% breadcrumb :book, @book %>
<%= render "shared/breadcrumbs" %>

<!-- ===== タイトル・説明 ===== -->
<h1 class="text-3xl font-bold mb-3"><%= @book.title %></h1>
<p class="text-slate-600 mb-6"><%= @book.description %></p>

<!-- ===== 目次（セクション一覧リンク） ===== -->
<h2 class="text-xl font-semibold mb-2">目次</h2>
<ul class="divide-y divide-slate-200 rounded-lg border bg-white">
  <% @sections.each do |s| %>
    <li>
      <!-- 章リンク：position + heading を表示 -->
      <%= link_to book_section_path(@book, s),
          class: "block px-4 py-3 hover:bg-slate-50 focus:bg-slate-50 focus:outline-none" do %>
        <div class="flex items-center justify-between">
          <div>
            <span class="text-slate-400 mr-3 text-sm"><%= s.position %>.</span>
            <span class="text-slate-900"><%= s.heading %></span>
          </div>
          <!-- FREE バッジ -->
          <% if s.is_free %>
            <span class="text-xs px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded">FREE</span>
          <% end %>
        </div>
      <% end %>
    </li>
  <% end %>
</ul>
