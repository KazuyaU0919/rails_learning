<!-- =========================================================
  ÈÉ®ÂàÜ„ÉÜ„É≥„Éó„É¨„Éº„Éà: Code Library Áî®„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥Áæ§
  ---------------------------------------------------------
  „Éª‰∏ª„Å´„Äå„ÅÑ„ÅÑ„Å≠ ‚ù§Ô∏è„Äç„Äå„Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØ üîñ„Äç„ÇíÂà∂Âæ°
  „ÉªTurbo Stream ÂØæÂøú„ÅßÂãïÁöÑ„Å´Êõ¥Êñ∞„Åï„Çå„ÇãÈ†òÂüü
  „Éªlocals:
      - pre_code: ÂØæË±°„ÅÆPreCode
      - current_like: ÁèæÂú®„ÅÆ„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„Éº„ÅÆLike„É¨„Ç≥„Éº„ÉâÔºàÂ≠òÂú®ÊôÇ„ÅØ„ÅÑ„ÅÑ„Å≠Ê∏àÔºâ
      - current_bookmark: ÁèæÂú®„ÅÆ„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„Éº„ÅÆBookmark„É¨„Ç≥„Éº„ÉâÔºàÂ≠òÂú®ÊôÇ„ÅØ‰øùÂ≠òÊ∏àÔºâ
========================================================= -->

<%# === „É≠„Éº„Ç´„É´Â§âÊï∞„ÅåÊ∏°„Å£„Å¶„Åì„Å™„ÅÑÂ†¥Âêà„Å´ nil „ÇíË£úÂ°´ === %>
<% current_like     = local_assigns.fetch(:current_like, nil) %>
<% current_bookmark = local_assigns.fetch(:current_bookmark, nil) %>

<div id="<%= dom_id(pre_code, :actions) %>" class="flex gap-2">
  <% if logged_in? %>

    <!-- =======================
         ‚ù§Ô∏è „ÅÑ„ÅÑ„Å≠„Éú„Çø„É≥
         ======================= -->
    <% if current_like %>
      <!-- „ÅÑ„ÅÑ„Å≠Ê∏à„ÅøÔºöËµ§Ëâ≤„ÅÆ„Éè„Éº„Éà„ÅßÂâäÈô§ÂèØËÉΩ -->
      <%= button_to like_path(current_like),
          method: :delete,
          form: { data: { turbo_stream: true } },
          class: "px-3 py-1 rounded bg-rose-600 text-white inline-flex items-center gap-1" do %>
        <%= heroicon "heart", variant: :solid, options: { class: "w-4 h-4" } %>
        <%= pre_code.like_count %>
      <% end %>
    <% else %>
      <!-- Êú™„ÅÑ„ÅÑ„Å≠Ôºö„Ç¢„Ç¶„Éà„É©„Ç§„É≥„ÅÆ„Éè„Éº„Éà„ÅßÁôªÈå≤ÂèØËÉΩ -->
      <%= button_to likes_path(pre_code_id: pre_code.id),
          method: :post,
          form: { data: { turbo_stream: true } },
          class: "px-3 py-1 rounded ring-1 ring-slate-300 inline-flex items-center gap-1" do %>
        <%= heroicon "heart", variant: :outline, options: { class: "w-4 h-4" } %>
        <%= pre_code.like_count %>
      <% end %>
    <% end %>

    <!-- =======================
         üîñ „Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØ„Éú„Çø„É≥
         ======================= -->
    <% if current_bookmark %>
      <!-- ‰øùÂ≠òÊ∏à„ÅøÔºöÈùíËâ≤„ÅßÂâäÈô§ÂèØËÉΩ -->
      <%= button_to bookmark_path(current_bookmark),
          method: :delete,
          form: { data: { turbo_stream: true } },
          class: "px-3 py-1 rounded bg-blue-600 text-white inline-flex items-center gap-1" do %>
        <%= heroicon "bookmark", variant: :solid, options: { class: "w-4 h-4" } %>
        ‰øùÂ≠òÊ∏à„Åø
      <% end %>
    <% else %>
      <!-- Êú™‰øùÂ≠òÔºöÊû†Á∑ö„Éú„Çø„É≥„ÅßÁôªÈå≤ÂèØËÉΩ -->
      <%= button_to bookmarks_path(pre_code_id: pre_code.id),
          method: :post,
          form: { data: { turbo_stream: true } },
          class: "px-3 py-1 rounded ring-1 ring-slate-300 inline-flex items-center gap-1" do %>
        <%= heroicon "bookmark", variant: :outline, options: { class: "w-4 h-4" } %>
        „Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØ
      <% end %>
    <% end %>
  <% end %>
</div>
