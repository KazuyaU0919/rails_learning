<%# =========================================================
   Turbo Stream: Likes#create
   ---------------------------------------------------------
   ・いいね作成後に、カード内のアクション領域とメトリクス表示を差し替え
   ・出力に混ざらないようコメントは ERB コメントを使用
========================================================= %>

<%= turbo_stream.replace dom_id(@pre_code, :actions) do %>
  <%= render "code_libraries/actions",
      pre_code: @pre_code,
      current_like:     (logged_in? ? @pre_code.likes.find_by(user_id: current_user.id)      : nil),
      current_bookmark: (logged_in? ? @pre_code.bookmarks.find_by(user_id: current_user.id)  : nil) %>
<% end %>

<%= turbo_stream.replace dom_id(@pre_code, :metrics) do %>
  <%= render "code_libraries/metrics", pre_code: @pre_code %>
<% end %>
